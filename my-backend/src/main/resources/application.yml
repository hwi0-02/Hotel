spring:
  mail:
    properties:
      mail:
        smtp:
          ssl:
            trust: smtp.gmail.com
            enable: 'false'
          starttls:
            enable: ${MAIL_SMTP_STARTTLS_ENABLE:false}
            required: 'true'
          auth: ${MAIL_SMTP_AUTH:false}
          connectiontimeout: '5000'
          writetimeout: '5000'
          timeout: '3000'
    username: ${MAIL_USERNAME:}
    host: ${MAIL_HOST:}
    protocol: smtp
    test-connection: 'false'
    password: ${MAIL_PASSWORD:}
    port: ${MAIL_PORT:0}
  security:
    oauth2:
      client:
        registration:
          kakao:
            client-secret: ${KAKAO_CLIENT_SECRET}
            authorization-grant-type: authorization_code
            client-id: ${KAKAO_CLIENT_ID}
            scope: profile_nickname,account_email
            client-authentication-method: client_secret_post
            redirect-uri: http://localhost:8888/login/oauth2/code/kakao
            client-name: Kakao
          naver:
            client-id: ${NAVER_CLIENT_ID}
            redirect-uri: http://localhost:8888/login/oauth2/code/naver
            authorization-grant-type: authorization_code
            scope: name,email
            client-secret: ${NAVER_CLIENT_SECRET}
          google:
            client-id: ${GOOGLE_CLIENT_ID}
            client-secret: ${GOOGLE_CLIENT_SECRET}
            redirect-uri: http://localhost:8888/login/oauth2/code/google
            scope: profile,email
        provider:
          naver:
            authorization-uri: https://nid.naver.com/oauth2.0/authorize
            user-name-attribute: response
            token-uri: https://nid.naver.com/oauth2.0/token
            user-info-uri: https://openapi.naver.com/v1/nid/me
          kakao:
            user-info-uri: https://kapi.kakao.com/v2/user/me
            user-name-attribute: id
            authorization-uri: https://kauth.kakao.com/oauth/authorize
            token-uri: https://kauth.kakao.com/oauth/token
  jpa:
    hibernate:
      ddl-auto: update
    properties:
      hibernate:
        dialect: org.hibernate.dialect.MariaDBDialect
    show-sql: 'true'
    open-in-view: 'false'
  application:
    name: my-backend
  datasource:
    driver-class-name: org.mariadb.jdbc.Driver
    url: jdbc:mariadb://${DB_HOST:mariadb}:${DB_PORT:3306}/hotel?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=Asia/Seoul&allowMultiQueries=true
    username: ${DB_USERNAME:night}
    password: ${DB_PASSWORD:night}
  servlet:
    multipart:
      max-request-size: 5MB
      max-file-size: 5MB
  config:
    import: optional:file:.env[.properties]

logging:
  level:
    org.springframework.mail: DEBUG
    org.springframework.mail.javamail: DEBUG
    org.springframework.security: TRACE
    com.sun.mail: DEBUG

file:
  upload:
    dir: uploads
    url: http://localhost:8888/uploads
  upload-dir: ./uploads

jwt:
  secret: ${JWT_SECRET}
  expiration: '86400000'

server:
  port: '8888'

# ──[ADDED] Prometheus/Actuator 노출 설정 ───────────────────────────────
management:
  endpoints:
    web:
      exposure:
        include: health,info,prometheus
  endpoint:
    health:
      show-details: always
  metrics:
    export:
      prometheus:
        enabled: true
# ───────────────────────────────────────────────────────────────────────

# ──[ADDED] CORS 설정 (AWS 배포용) ────────────────────────────────────
cors:
  allowed:
    origins: ${CORS_ALLOWED_ORIGINS:http://localhost:5173}
# ───────────────────────────────────────────────────────────────────────
